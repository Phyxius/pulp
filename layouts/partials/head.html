<head>
  <title>
      {{ if or (eq .Title .Site.Title) (eq .Title "") }}
          {{ .Site.Title }}
      {{ else }}
          {{ .Title }} - {{ .Site.Title }}
      {{ end }}
  </title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="{{ .Site.Params.Author }}" />
  {{with .Site.Params.favicon}}
    {{ $favicon := resources.Get .}}
    {{ range slice "32x32" "128x128" "180x180" "192x192"}}
      {{ $resizedIcon := $favicon.Resize .}}
      <link rel="shortcut icon" href="{{$resizedIcon.Permalink}}" sizes="{{.}}">
    {{end}}
  {{ end }}

  <!-- css -->
  {{ $style := resources.Get "css/style.css" }}
  {{ $markdown := resources.Get "css/markdown.css" }}
  {{ $syntaxHighlight := resources.Get "css/syntax-highlight.css" }}
  {{ $css := slice $style $markdown $syntaxHighlight | resources.Concat "css/style.css" | resources.Minify | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $css.Permalink }}" integrity="{{ $css.Data.Integrity }}">
  {{ $styleDark := resources.Get "css/style-dark.css" }}
  {{ $markdownDark := resources.Get "css/markdown-dark.css" }}
  {{ $cssDark := slice $styleDark $markdownDark | resources.Concat "css/style-dark.css" | resources.Minify | resources.Fingerprint }}
  <link rel="stylesheet" href="{{ $cssDark.Permalink }}" media="(prefers-color-scheme: dark)" integrity="{{ $cssDark.Data.Integrity }}">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.0/css/all.css" integrity="sha384-iw3OoTErCYJJB9mCa8LNS2hbsQ7M3C0EpIsO/H5+EGAkPGc6rk+V8i04oW/K5xq0" crossorigin="anonymous">
  {{ $darkModeToggle := resources.Get "js/dark-mode-toggle/src/dark-mode-toggle.mjs" }}
  {{ $jsBundle := slice $darkModeToggle | resources.Concat "js/jsModules.mjs" | resources.Minify | resources.Fingerprint }}
  <script type="module" src="{{ $jsBundle.Permalink }}" integrity="{{ $jsBundle.Data.Integrity }}"></script>
  <!-- custom css -->
  {{ range .Site.Params.custom_css }}
  <link rel="stylesheet" href="{{ . }}">
  {{ end }}

  {{/* NOTE: These Hugo Internal Templates can be found starting at https://github.com/gohugoio/hugo/tree/master/tpl/tplimpl/embedded/templates */}}
  {{- template "_internal/opengraph.html" . -}}
  {{- template "_internal/schema.html" . -}}
  {{- partial "twitter_cards.html" . -}}

  <!-- Polyfill for old browsers -->
  {{ `<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->` | safeHTML }}

  {{ `<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
  <![endif]-->` | safeHTML }}

  <!-- Analytics -->
  {{- if and (not hugo.IsServer) .Site.Params.GoogleAnalytics -}}
  {{ template "_internal/google_analytics.html" . }}
  {{- end -}}

  <!-- MathJax -->
  {{ if or .Params.math .Site.Params.math }}
    {{ partial "mathjax_support.html" . }}
  {{ end }}
</head>
